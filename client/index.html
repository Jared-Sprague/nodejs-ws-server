<!DOCTYPE html>
<html>
<head>
  <style>
    body {
      font-family: Tahoma, Geneva, sans-serif;
    }

    div {
      display: inline;
    }
  </style>
  <script>
    function updateStats(updateCount) {
      document.getElementById('update').innerHTML = updateCount;
    }

    var host = window.document.location.host.replace(/:.*/, '');

    var ws = new WebSocket('ws://' + host + ':8080');

    ws.onmessage = function (msg) {
      var updateCount = JSON.parse(msg.data);
      updateStats(updateCount);
    };

    var buffer = new ArrayBuffer(52); // total bytes in message
    var data_view = new Uint32Array(buffer);
    data_view[0] = ws.bufferedAmount;

    function send() {
      ws.send(buffer, { binary: true, mask: true });
    }

    setInterval(send, 50);

  </script>
</head>
<body>
<strong>Server Stats</strong><br>
upcate count: <div id='update'></div><br>
</body>
</html>
